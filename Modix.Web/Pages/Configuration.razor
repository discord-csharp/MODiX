@page "/config"
@page "/config/{SubPage}"

@attribute [Authorize(
    Roles = $@"
        {nameof(AuthorizationClaim.DesignatedRoleMappingRead)},
        {nameof(AuthorizationClaim.DesignatedChannelMappingRead)},
        {nameof(AuthorizationClaim.AuthorizationConfigure)}")]

@using Modix.Data.Models.Core;
@using Modix.Web.Components
@using Modix.Web.Components.Configuration
@using MudBlazor

<PageTitle>Modix - Configuration</PageTitle>

<CascadingAuthenticationState>

    <MudGrid>
        <MudItem xs="9" md="2" lg="1">
            <MudText Typo="Typo.h6">Configuration</MudText>
            <MudPaper>
                <MudList SelectedValue="@SubPage" Clickable="true">
                    <MudListItem Value="@("roles")" Href="/config/roles" Text="Roles"/>
                    <MudDivider/>
                    <MudListItem Value="@("channels")" Href="/config/channels" Text="Channels" />
                    <MudDivider/>
                    <MudListItem Value="@("claims")" Href="/config/claims" Text="Claims" />
                </MudList>
            </MudPaper>
        </MudItem>
        <MudItem xs="12" md="9" lg="11">
            @if (SubPage == "roles")
            {
                <AuthorizeView Roles="@nameof(AuthorizationClaim.DesignatedRoleMappingRead)">
                    <Roles />
                </AuthorizeView>
            }
            else if (SubPage == "channels")
            {
                <AuthorizeView Roles="@nameof(AuthorizationClaim.DesignatedChannelMappingRead)">
                    <Channels />
                </AuthorizeView>
            }
            else if (SubPage == "claims")
            {
                <AuthorizeView Roles="@nameof(AuthorizationClaim.AuthorizationConfigure)">
                    <Claims />
                </AuthorizeView>
            }
        </MudItem>
    </MudGrid>
</CascadingAuthenticationState>

@code {

    [Parameter]
    public string? SubPage { get; set; }

}
